---
---
<!DOCTYPE html>

<html>
<head>
<title>World Rugby Rankings calculator</title>
<meta name="description" content="Check World Rugby's test rankings and see what effect upcoming tests might have." />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//cdn.rawgit.com/agschwender/jquery.formatDateTime/master/dist/jquery.formatDateTime.min.js"></script>
<script src="//ajax.aspnetcdn.com/ajax/knockout/knockout-3.4.2.js"></script>
<link href="//fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet"> 
<link href="styles/wr-calc.css?v={{site.time|date:'%s'}}" type="text/css" rel="stylesheet">
<script src="scripts/models/ViewModel.js?v={{site.time|date:'%s'}}" type="text/javascript" ></script>
<script src="scripts/models/RankingViewModel.js?v={{site.time|date:'%s'}}" type="text/javascript" ></script>
<script src="scripts/models/FixtureViewModel.js?v={{site.time|date:'%s'}}" type="text/javascript" ></script>
</head>
<body>
    <div id="union" class="segmented-control" role="group" aria-label="Select rankings competition">
        <button type="button"
            class="segmented-control__segment"
            data-bind="css: { 'segmented-control__segment--active': source == 'mru' },
                       attr: { 'aria-pressed': source == 'mru' },
                       click: function () { if ($data.source !== 'mru') { window.location.search = '?s=mru'; } }">
            <span class="segmented-control__label">Men's</span>
        </button>
        <button type="button"
            class="segmented-control__segment"
            data-bind="css: { 'segmented-control__segment--active': source == 'wru' },
                       attr: { 'aria-pressed': source == 'wru' },
                       click: function () { if ($data.source !== 'wru') { window.location.search = '?s=wru'; } }">
            <span class="segmented-control__label">Women's</span>
        </button>
    </div>
    <div id="leftright">
        <div id="left">
            <div class="header">
                <h3>Rankings</h3>
            </div>
            <div id="which" data-bind="if: rankingsChoice">
                <div class="segmented-control segmented-control--block">
                    <fieldset class="segmented-control__fieldset" role="radiogroup" aria-label="Choose rankings to display">
                        <legend class="visually-hidden">Rankings to display</legend>
                        <label class="segmented-control__segment"
                            data-bind="css: { 'segmented-control__segment--active': $data.rankingsChoice() === 'original' }">
                            <input class="segmented-control__input" type="radio" name="rankings" value="original" data-bind="checked: rankingsChoice">
                            <span class="segmented-control__content">
                                <span class="segmented-control__label"
                                    data-bind="text: $data.originalDate() + ($data.originalDateIsEstimated() ? '*' : ''), title: $data.originalDateIsEstimated() ? 'Last published rankings on or before this date' : ''"></span>
                            </span>
                        </label>
                        <label class="segmented-control__segment"
                            data-bind="css: { 'segmented-control__segment--active': $data.rankingsChoice() === 'calculated' }">
                            <input class="segmented-control__input" type="radio" name="rankings" value="calculated" data-bind="checked: rankingsChoice">
                            <span class="segmented-control__content">
                                <span class="segmented-control__label">CALCULATED</span>
                            </span>
                        </label>
                    </fieldset>
                </div>
            </div>

            <div id="rankings">
                <!-- ko ifnot: rankingsChoice -->
                <h4>
                    Loading rankings from WR</a>
                </h4>
                <!-- /ko -->

                <div data-bind="if: rankingsChoice">
                    <table>
                        <thead>
                            <tr><th class="pos">#</th><th /><th class="name">Team</th><th colspan=2>Points</th></tr>
                        </thead>
                        <tbody data-bind="foreach: shownRankings">
                            <tr data-bind="css: changeCls">
                                <td class="pos" data-bind="text: pos"></td>
                                <td class="posDiff" data-bind="html: previousPosDisplay"></td>
                                <td class="name" data-bind="text: team.displayName, title: team.displayTitle"></td>
                                <td data-bind="text: ptsDisplay"></td>
                                <td class="ptsDiff" data-bind="html: ptsDiffDisplay"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="right">
            <div class="header">
                <h3>Fixtures</h3>
            </div>
            <div id="fixtures">
                <div class="fixtures-list">
                    <!-- ko foreach: fixtures -->
                    <div class="fixture-card">
                        <!-- ko if: $data.venueNameAndCountry || $data.kickoff || $data.liveScoreMode || $data.eventPhase -->
                        <div class="fixture-card__hero">
                            <div class="fixture-card__hero-meta">
                                <div class="fixture-card__hero-item fixture-card__hero-item--kickoff" data-bind="text: kickoff" title="Kickoff in your browser time"></div>
                                <div class="fixture-card__hero-item fixture-card__hero-item--phase" data-bind="text: ($data.eventPhase && $data.liveScoreMode) ? ($data.eventPhase + ' (' + $data.liveScoreMode + ')') : ($data.eventPhase || $data.liveScoreMode)"></div>
                                <div class="fixture-card__hero-item fixture-card__hero-item--venue" data-bind="text: venueNameAndCountry, attr: { title: venueCity }"></div>
                            </div>
                        </div>
                        <!-- /ko -->
                        <div class="fixture-card__content">
                            <div class="fixture-card__decision-board">
                                <div class="fixture-card__decision-column fixture-card__decision-column--left">
                                    <div class="fixture-card__team fixture-card__team--home">
                                        <span class="fixture-card__label">Home team</span>
                                        <select 
                                            class="plain-text-select"   
                                            data-bind="options: 
                                            $parent.teams, 
                                            optionsText: 'displayName', 
                                            optionsValue: 'id', 
                                            value: homeId, 
                                            optionsCaption: homeCaption, 
                                            disabled: !$data.canEditTeams() || $data.alreadyInRankings">
                        
                                            </select>
                                        <span class="fixture-card__rating-badge" data-bind="text: $data.homeRankingBefore() ? $data.homeRankingBefore().toFixed(2) + ' pts' : '—'"></span>
                                    </div>
                                    <div class="fixture-card__outcome">
                                        <span class="fixture-card__label">Outcome</span>
                                        <select data-bind="options: outcomeOptions, optionsText: 'label', optionsValue: 'value', optionsCaption: outcomeCaption, value: result, valueAllowUnset: true, disabled: alreadyInRankings"></select>
                                    </div>
                                </div>
                                <div class="fixture-card__decision-column fixture-card__decision-column--right">
                                    <div class="fixture-card__team fixture-card__team--away">
                                        <span class="fixture-card__label">Away team</span>
                                        <select class="plain-text-select" data-bind="options: $parent.teams, optionsText: 'displayName', optionsValue: 'id', value: awayId, optionsCaption: awayCaption, disabled: !$data.canEditTeams() || $data.alreadyInRankings"></select>
                                        <span class="fixture-card__rating-badge" data-bind="text: $data.awayRankingBefore() ? $data.awayRankingBefore().toFixed(2) + ' pts' : '—'"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="fixture-card__section fixture-card__section--flags">
                                <span class="fixture-card__label">Flags</span>
                                <div class="fixture-card__flags">
                                    <label class="fixture-card__flag" title="No Home Advantage">
                                        <input type="checkbox" data-bind="checked: noHome, click: preventCheckboxToggle, event: { keydown: preventCheckboxToggle }" />
                                        <span class="fixture-card__flag-text">NHA</span>
                                        <span class="fixture-card__flag-note" data-bind="if: switched" title="Home team is nominally Away">*</span>
                                    </label>
                                    <label class="fixture-card__flag" title="Is Rugby World Cup match">
                                        <input type="checkbox" data-bind="checked: isRwc, click: preventCheckboxToggle, event: { keydown: preventCheckboxToggle }" />
                                        <span class="fixture-card__flag-text">RWC</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- ko if: $data.hasValidTeams() && !$data.alreadyInRankings -->
                        <!-- /ko -->
                        <!-- ko if: alreadyInRankings -->
                        <div class="possible-changes possible-changes--message">
                            <div class="possible-changes__text" title="The match is complete and kicked off 90 minutes or more before the latest rankings, so assume it is already included">Already ranked*</div>
                        </div>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <span class="secondaryText">
            Rankings and ranking algorithm are the property of <a data-bind="attr: { href: 'https://www.world.rugby/tournaments/rankings/' + $data.rankingsSource() }">World Rugby</a>.
            See <a href="https://github.com/rawling/wr-calc/">GitHub</a> for source, contributors and license.
        </span>
    </div>
    <script src="scripts/wr-calc.js?v={{site.time|date:'%s'}}" type="text/javascript" ></script>
</body>
</html>
